# äº¤é€šè™ŸèªŒæ§åˆ¶æ–¹æ³•æ¯”è¼ƒå¯¦é©—å ±å‘Š (Final)

**å¯¦é©—æ—¥æœŸ**: 2025-11-26  
**å¯¦é©—ç›®çš„**: æ¯”è¼ƒ PPOã€Max Pressureã€Webster+PID ä¸‰ç¨®äº¤é€šè™ŸèªŒæ§åˆ¶æ–¹æ³•  
**å¯¦é©—è¨­è¨ˆ**: æ¯å€‹æ–¹æ³•åŸ·è¡Œ 3 æ¬¡ï¼Œå–å¹³å‡å€¼æ¯”è¼ƒ


---

## å¯¦é©—çµæœè¨˜éŒ„

### 1. PPO å¼·åŒ–å­¸ç¿’æ–¹æ³•
**ç¨‹å¼**: `traci.PPO.update.py`

#### Run 1 - 2025-11-26 10:14

| æŒ‡æ¨™ | æ•¸å€¼ |
|------|------|
| EB å¹³å‡æ’éšŠ (Queue) | 20.28 veh |
| SB å¹³å‡æ’éšŠ (Queue) | 20.57 veh |
| **Total Avg Queue** | **40.85 veh** |
| EB å¹³å‡åœç­‰ (Halt) | 15.11 veh |
| SB å¹³å‡åœç­‰ (Halt) | 15.31 veh |
| EB ç¶ ç‡ˆæ¯”ä¾‹ | 0.39 |
| SB ç¶ ç‡ˆæ¯”ä¾‹ | 0.39 |
| é»ƒç‡ˆæ¯”ä¾‹ | 0.23 |
| Total Arrived Veh | 2578 |
| **Avg Delay Time** | **21.24 sec/veh** |
| **Total Waiting Time** | **54755.60 vehÂ·sec** |
| Cumulative Reward | -416950.00 |

**ç›¸ä½åˆ†é…**: Phase 0: 0.39 | Phase 1: 0.11 | Phase 2: 0.39 | Phase 3: 0.11

#### Run 2 - 2025-11-26 10:15

| æŒ‡æ¨™ | æ•¸å€¼ |
|------|------|
| EB å¹³å‡æ’éšŠ (Queue) | 20.19 veh |
| SB å¹³å‡æ’éšŠ (Queue) | 20.50 veh |
| **Total Avg Queue** | **40.69 veh** |
| EB å¹³å‡åœç­‰ (Halt) | 15.03 veh |
| SB å¹³å‡åœç­‰ (Halt) | 15.23 veh |
| EB ç¶ ç‡ˆæ¯”ä¾‹ | 0.39 |
| SB ç¶ ç‡ˆæ¯”ä¾‹ | 0.38 |
| é»ƒç‡ˆæ¯”ä¾‹ | 0.23 |
| Total Arrived Veh | 2597 |
| **Avg Delay Time** | **20.98 sec/veh** |
| **Total Waiting Time** | **54480.00 vehÂ·sec** |
| Cumulative Reward | -412878.00 |

**ç›¸ä½åˆ†é…**: Phase 0: 0.38 | Phase 1: 0.12 | Phase 2: 0.39 | Phase 3: 0.12

#### Run 3 - 2025-11-26 10:17

| æŒ‡æ¨™ | æ•¸å€¼ |
|------|------|
| EB å¹³å‡æ’éšŠ (Queue) | 19.77 veh |
| SB å¹³å‡æ’éšŠ (Queue) | 20.42 veh |
| **Total Avg Queue** | **40.19 veh** |
| EB å¹³å‡åœç­‰ (Halt) | 14.58 veh |
| SB å¹³å‡åœç­‰ (Halt) | 15.19 veh |
| EB ç¶ ç‡ˆæ¯”ä¾‹ | 0.38 |
| SB ç¶ ç‡ˆæ¯”ä¾‹ | 0.39 |
| é»ƒç‡ˆæ¯”ä¾‹ | 0.23 |
| Total Arrived Veh | 2576 |
| **Avg Delay Time** | **20.80 sec/veh** |
| **Total Waiting Time** | **53569.80 vehÂ·sec** |
| Cumulative Reward | -405978.00 |

**ç›¸ä½åˆ†é…**: Phase 0: 0.39 | Phase 1: 0.12 | Phase 2: 0.38 | Phase 3: 0.12

#### PPO å¹³å‡å€¼ï¼ˆ3 æ¬¡å¯¦é©—ï¼‰

| æŒ‡æ¨™ | å¹³å‡å€¼ | æ¨™æº–å·® |
|------|--------|--------|
| **Total Avg Queue** | **40.58 veh** | **0.28 veh** |
| **Avg Delay Time** | **21.01 sec/veh** | **0.18 sec/veh** |
| **Total Waiting Time** | **54268.47 vehÂ·sec** | **506.68 vehÂ·sec** |
| Total Arrived Veh | **2584 veh** | **9 veh** |

---

### 2. Max Pressure æ–¹æ³•
**ç¨‹å¼**: `traci.maxpressure.fixed_yellow.compare.py`

#### Run 1 - 2025-11-26 10:26

| æŒ‡æ¨™ | æ•¸å€¼ |
|------|------|
| EB å¹³å‡æ’éšŠ (Queue) | 20.21 veh |
| SB å¹³å‡æ’éšŠ (Queue) | 20.39 veh |
| **Total Avg Queue** | **40.60 veh** |
| EB å¹³å‡åœç­‰ (Halt) | 15.03 veh |
| SB å¹³å‡åœç­‰ (Halt) | 15.11 veh |
| EB ç¶ ç‡ˆæ¯”ä¾‹ | 0.38 |
| SB ç¶ ç‡ˆæ¯”ä¾‹ | 0.39 |
| é»ƒç‡ˆæ¯”ä¾‹ | 0.23 |
| Total Arrived Veh | 2582 |
| **Avg Delay Time** | **21.02 sec/veh** |
| **Total Waiting Time** | **54266.30 vehÂ·sec** |
| Cumulative Reward | -542663.00 |

**ç›¸ä½åˆ†é…**: Phase 0: 0.39 | Phase 1: 0.12 | Phase 2: 0.38 | Phase 3: 0.11

#### Run 2 - 2025-11-26 10:26

| æŒ‡æ¨™ | æ•¸å€¼ |
|------|------|
| EB å¹³å‡æ’éšŠ (Queue) | 20.21 veh |
| SB å¹³å‡æ’éšŠ (Queue) | 20.39 veh |
| **Total Avg Queue** | **40.60 veh** |
| EB å¹³å‡åœç­‰ (Halt) | 15.03 veh |
| SB å¹³å‡åœç­‰ (Halt) | 15.11 veh |
| EB ç¶ ç‡ˆæ¯”ä¾‹ | 0.38 |
| SB ç¶ ç‡ˆæ¯”ä¾‹ | 0.39 |
| é»ƒç‡ˆæ¯”ä¾‹ | 0.23 |
| Total Arrived Veh | 2582 |
| **Avg Delay Time** | **21.02 sec/veh** |
| **Total Waiting Time** | **54266.30 vehÂ·sec** |
| Cumulative Reward | -542663.00 |

**å‚™è¨»**: èˆ‡ Run 1 å®Œå…¨ç›¸åŒ

#### Run 3 - 2025-11-26 10:26

| æŒ‡æ¨™ | æ•¸å€¼ |
|------|------|
| EB å¹³å‡æ’éšŠ (Queue) | 20.21 veh |
| SB å¹³å‡æ’éšŠ (Queue) | 20.39 veh |
| **Total Avg Queue** | **40.60 veh** |
| EB å¹³å‡åœç­‰ (Halt) | 15.03 veh |
| SB å¹³å‡åœç­‰ (Halt) | 15.11 veh |
| EB ç¶ ç‡ˆæ¯”ä¾‹ | 0.38 |
| SB ç¶ ç‡ˆæ¯”ä¾‹ | 0.39 |
| é»ƒç‡ˆæ¯”ä¾‹ | 0.23 |
| Total Arrived Veh | 2582 |
| **Avg Delay Time** | **21.02 sec/veh** |
| **Total Waiting Time** | **54266.30 vehÂ·sec** |
| Cumulative Reward | -542663.00 |

**å‚™è¨»**: èˆ‡ Run 1 å®Œå…¨ç›¸åŒ

#### Max Pressure å¹³å‡å€¼

| æŒ‡æ¨™ | å¹³å‡å€¼ | æ¨™æº–å·® |
|------|--------|--------|
| **Total Avg Queue** | **40.60 veh** | **0.00 veh** |
| **Avg Delay Time** | **21.02 sec/veh** | **0.00 sec/veh** |
| **Total Waiting Time** | **54266.30 vehÂ·sec** | **0.00 vehÂ·sec** |
| Total Arrived Veh | **2582 veh** | **0 veh** |

---

### 3. Webster + PID æ–¹æ³•
**ç¨‹å¼**: `traci.Webster_PID.py`

#### Run 1 - 2025-11-26 10:47

| æŒ‡æ¨™ | æ•¸å€¼ |
|------|------|
| EB å¹³å‡æ’éšŠ (Queue) | 36.96 veh |
| SB å¹³å‡æ’éšŠ (Queue) | 36.14 veh |
| **Total Avg Queue** | **73.10 veh** |
| EB å¹³å‡åœç­‰ (Halt) | 31.16 veh |
| SB å¹³å‡åœç­‰ (Halt) | 29.77 veh |
| EB ç¶ ç‡ˆæ¯”ä¾‹ | 0.49 |
| SB ç¶ ç‡ˆæ¯”ä¾‹ | 0.47 |
| é»ƒç‡ˆæ¯”ä¾‹ | 0.04 |
| Total Arrived Veh | 2273 |
| **Avg Delay Time** | **48.25 sec/veh** |
| **Total Waiting Time** | **109668.60 vehÂ·sec** |
| Cumulative Reward | -1096686.00 |

**ç›¸ä½åˆ†é…**: Phase 0: 0.49 | Phase 1: 0.02 | Phase 2: 0.47 | Phase 3: 0.02

#### Run 2 - 2025-11-26 10:50

| æŒ‡æ¨™ | æ•¸å€¼ |
|------|------|
| EB å¹³å‡æ’éšŠ (Queue) | 36.96 veh |
| SB å¹³å‡æ’éšŠ (Queue) | 36.14 veh |
| **Total Avg Queue** | **73.10 veh** |
| EB å¹³å‡åœç­‰ (Halt) | 31.16 veh |
| SB å¹³å‡åœç­‰ (Halt) | 29.77 veh |
| EB ç¶ ç‡ˆæ¯”ä¾‹ | 0.49 |
| SB ç¶ ç‡ˆæ¯”ä¾‹ | 0.47 |
| é»ƒç‡ˆæ¯”ä¾‹ | 0.04 |
| Total Arrived Veh | 2273 |
| **Avg Delay Time** | **48.25 sec/veh** |
| **Total Waiting Time** | **109668.60 vehÂ·sec** |
| Cumulative Reward | -1096686.00 |

**å‚™è¨»**: èˆ‡ Run 1 å®Œå…¨ç›¸åŒ

#### Run 3 - 2025-11-26 10:50

| æŒ‡æ¨™ | æ•¸å€¼ |
|------|------|
| EB å¹³å‡æ’éšŠ (Queue) | 36.96 veh |
| SB å¹³å‡æ’éšŠ (Queue) | 36.14 veh |
| **Total Avg Queue** | **73.10 veh** |
| EB å¹³å‡åœç­‰ (Halt) | 31.16 veh |
| SB å¹³å‡åœç­‰ (Halt) | 29.77 veh |
| EB ç¶ ç‡ˆæ¯”ä¾‹ | 0.49 |
| SB ç¶ ç‡ˆæ¯”ä¾‹ | 0.47 |
| é»ƒç‡ˆæ¯”ä¾‹ | 0.04 |
| Total Arrived Veh | 2273 |
| **Avg Delay Time** | **48.25 sec/veh** |
| **Total Waiting Time** | **109668.60 vehÂ·sec** |
| Cumulative Reward | -1096686.00 |

**å‚™è¨»**: èˆ‡ Run 1 å®Œå…¨ç›¸åŒ

#### Webster + PID å¹³å‡å€¼

| æŒ‡æ¨™ | å¹³å‡å€¼ | æ¨™æº–å·® |
|------|--------|--------|
| **Total Avg Queue** | **73.10 veh** | **0.00 veh** |
| **Avg Delay Time** | **48.25 sec/veh** | **0.00 sec/veh** |
| **Total Waiting Time** | **109668.60 vehÂ·sec** | **0.00 vehÂ·sec** |
| Total Arrived Veh | **2273 veh** | **0 veh** |

### 4. LLM (Gemini) æ–¹æ³•
**ç¨‹å¼**: `traci.LLM.RAP.compare.py`
**æ¨¡å‹**: `gemini-2.0-flash` (RAP Method)

#### Run 1 - 2025-11-26 17:27

| æŒ‡æ¨™ | æ•¸å€¼ |
|------|------|
| EB å¹³å‡æ’éšŠ (Queue) | 22.45 veh |
| SB å¹³å‡æ’éšŠ (Queue) | 44.16 veh |
| **Total Avg Queue** | **66.61 veh** |
| EB å¹³å‡åœç­‰ (Halt) | 17.18 veh |
| SB å¹³å‡åœç­‰ (Halt) | 36.93 veh |
| EB ç¶ ç‡ˆæ¯”ä¾‹ | 0.27 |
| SB ç¶ ç‡ˆæ¯”ä¾‹ | 0.60 |
| é»ƒç‡ˆæ¯”ä¾‹ | 0.13 |
| Total Arrived Veh | 2296 |
| **Avg Delay Time** | **42.65 sec/veh** |
| **Total Waiting Time** | **97934.20 vehÂ·sec** |
| Cumulative Reward | -979342.00 |

**å‚™è¨»**: 
- ç”±æ–¼ API Rate Limit é™åˆ¶ï¼Œæœ¬æ¬¡å¯¦é©—æœ‰ **37.7%** çš„æ±ºç­– Fallback åˆ° Max Pressureã€‚
- å¯¦éš› LLM æ§åˆ¶æ¯”ä¾‹ç´„ 62.3%ã€‚
- æ•¸æ“šåƒ…ä¾›åƒè€ƒï¼Œå¯èƒ½ä½ä¼°äº†ç´” LLM çš„æ•ˆèƒ½ï¼ˆæˆ–é«˜ä¼°ï¼Œè¦– Fallback æ•ˆæœè€Œå®šï¼‰ã€‚

---

## ğŸ“ˆ å››ç¨®æ–¹æ³•æ¯”è¼ƒï¼ˆåŸºæ–¼å¹³å‡å€¼ï¼‰

| æŒ‡æ¨™ | PPO | Max Pressure | Webster + PID | LLM (Gemini)* | æœ€ä½³ |
|------|-----|--------------|---------------|---------------|------|
| **Total Avg Queue (veh)** | 40.58 | 40.60 | 73.10 | 66.61 | **PPO** |
| **Avg Delay Time (sec/veh)** | 21.01 | 21.02 | 48.25 | 42.65 | **PPO** |
| **Total Waiting Time (vehÂ·sec)** | 54268 | 54266 | 109669 | 97934 | **Max Pressure** |
| **Total Arrived Veh** | 2584 | 2582 | 2273 | 2296 | **PPO** |

*\* LLM æ•¸æ“šåŸºæ–¼å–®æ¬¡å¯¦é©—ä¸”å«æœ‰ 37.7% Fallbackï¼Œåƒ…ä¾›åƒè€ƒã€‚*

---

## åˆæ­¥è§€å¯Ÿ

### PPO
- **å„ªé»**: è¡¨ç¾æœ€å…¨é¢ï¼ŒQueue å’Œ Delay éƒ½æ˜¯æœ€ä½çš„ï¼Œä¸”é€šéè»Šè¼›æ•¸æœ€å¤šã€‚
- **ç‰¹é»**: èƒ½å¤ å­¸ç¿’åˆ°é¡ä¼¼ Max Pressure çš„å£“åŠ›å¹³è¡¡ç­–ç•¥ï¼Œä¸¦åœ¨ç´°ç¯€ä¸Šï¼ˆå¦‚é»ƒç‡ˆåˆ‡æ›æ™‚æ©Ÿï¼‰å¯èƒ½åšå¾—æ›´å¥½ã€‚

### Max Pressure
- **å„ªé»**: ä¸éœ€è¦è¨“ç·´ï¼Œå³æ’å³ç”¨ï¼Œæ•ˆèƒ½æ¥µä½³ï¼ˆèˆ‡ PPO å¹¾ä¹å¹³æ‰‹ï¼‰ã€‚
- **ç‰¹é»**: ç‰©ç†æ„ç¾©æ˜ç¢ºï¼ˆå¹³è¡¡å£“åŠ›ï¼‰ï¼Œæ˜¯éå¸¸å¼·å¤§çš„åŸºæº–æ–¹æ³•ã€‚

### Webster + PID
- **ç¼ºé»**: **å®Œå…¨ç„¡æ³•æ‡‰å°å‹•æ…‹è®ŠåŒ–çš„è»Šæµ**ã€‚åæ‡‰é²éˆï¼Œå°è‡´åš´é‡çš„æ’éšŠç©å£“ã€‚
- **ç‰¹é»**: åœ¨æ­¤å¯¦é©—ä¸­è¡¨ç¾æœ€å·®ï¼Œè­‰æ˜äº†å‚³çµ±æ–¹æ³•åœ¨é«˜å‹•æ…‹å ´æ™¯çš„å±€é™æ€§ã€‚

### LLM (Gemini)
- **è¡¨ç¾**: å„ªæ–¼ Webster + PIDï¼Œä½†æ˜é¡¯è½å¾Œæ–¼ PPO å’Œ Max Pressureã€‚
- **å•é¡Œ**: 
    1. **API å»¶é²èˆ‡é™åˆ¶**: å—åˆ° Rate Limit å½±éŸ¿åš´é‡ï¼Œå°è‡´å¤§é‡ Fallbackã€‚
    2. **æ±ºç­–ä¸ç©©å®š**: é›–ç„¶ä½¿ç”¨äº† RAP æ–¹æ³•ï¼Œä½†åœ¨ç¼ºä¹å¾®èª¿çš„æƒ…æ³ä¸‹ï¼Œé€šç”¨ LLM å°äº¤é€šå‹•æ…‹çš„ç†è§£ä»ä¸å¦‚å°ˆç”¨æ¼”ç®—æ³•ï¼ˆPPO/MaxPï¼‰ã€‚
- **æ½›åŠ›**: å…·å‚™å¼·å¤§çš„è§£é‡‹èƒ½åŠ›ï¼ˆThought Processï¼‰ï¼Œé€™æ˜¯å…¶ä»–æ–¹æ³•æ²’æœ‰çš„ã€‚è‹¥èƒ½è§£æ±º API é€Ÿåº¦å’Œé¡åº¦å•é¡Œï¼Œæˆ–ä½¿ç”¨æ›´å¼·çš„æ¨¡å‹ï¼ˆå¦‚ GPT-4oï¼‰ï¼Œæ•ˆèƒ½å¯èƒ½æå‡ã€‚

---

## çµè«–

**ç›®å‰æœ€ä½³æ–¹æ³•**: **PPO** èˆ‡ **Max Pressure** ä¸¦åˆ—ç¬¬ä¸€ã€‚

**åŸå› **: 
1. å…©è€…åœ¨å„é …æŒ‡æ¨™ä¸Šå·®ç•°æ¥µå°ï¼ˆ< 0.1%ï¼‰ï¼Œéƒ½é å„ªæ–¼ Webster å’Œ LLMã€‚
2. PPO åœ¨å¹³å‡æ’éšŠå’Œå»¶æ»¯æ™‚é–“ä¸Šå¾®å¹…é ˜å…ˆã€‚
3. LLM é›–ç„¶å±•ç¾äº†å¯è¡Œæ€§ï¼ˆæ¯” Webster å¥½ï¼‰ï¼Œä½†åœ¨ç¾éšæ®µå—é™æ–¼æ¨ç†é€Ÿåº¦å’Œ API é™åˆ¶ï¼Œå°šç„¡æ³•æŒ‘æˆ° PPO/MaxP çš„çµ±æ²»åœ°ä½ã€‚
---


